(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(47)},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(15),s=n.n(i),c=(n(22),n(23),n(4)),m=n.n(c);n(24);function o(e){var t,n=m()("day-list__item",{"day-list__item--selected":e.selected,"day-list__item--full":0===e.spots});return r.a.createElement("li",{className:n,onClick:function(){return e.setDay(e.name)}},r.a.createElement("h2",{className:"text--regular"},e.name),r.a.createElement("h3",{className:"text--light"},0===(t=e.spots)?"no spots remaining":1===t?"1 spot remaining":2===t?"2 spots remaining":3===t?"3 spots remaining":4===t?"4 spots remaining":5===t?"5 spots remaining":void 0))}function l(e){return e.days.map(function(t){return r.a.createElement("ul",{key:t.id},r.a.createElement(o,{name:t.name,spots:t.spots-1,selected:t.name===e.day,setDay:e.setDay}))})}n(25);function u(e){return r.a.createElement("header",{className:"appointment__time"},r.a.createElement("h4",{className:"text--semi-bold"},e.time),r.a.createElement("hr",{className:"appointment__separator"}))}function d(e){return r.a.createElement("main",{className:"appointment__add"},r.a.createElement("img",{className:"appointment__add-button",src:"images/add.png",alt:"Add",onClick:e.onAdd}))}function p(e){var t=e.interviewer;return r.a.createElement("main",{className:"appointment__card appointment__card--show"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("h2",{className:"text--regular"},e.student),r.a.createElement("section",{className:"interviewer"},r.a.createElement("h4",{className:"text--light"},"Interviewer"),r.a.createElement("h3",{className:"text--regular"},t))),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement("img",{className:"appointment__actions-button",src:"images/edit.png",alt:"Edit",onClick:e.onEdit}),r.a.createElement("img",{className:"appointment__actions-button",src:"images/trash.png",alt:"Delete",onClick:e.onDelete}))))}var E=n(16),v=n(2);n(26);function f(e){var t=m()("button",{"button--confirm":e.confirm,"button--danger":e.danger});return r.a.createElement("button",{className:t,onClick:e.onClick,disabled:e.disabled},e.children)}n(27),n(28);function _(e){var t=m()("interviewers__item",{"interviewers__item--selected":e.selected,"interviewers__item--full":0===e.spots});return r.a.createElement("li",{className:t,onClick:e.setInterviewer},r.a.createElement("img",{className:"interviewers__item-image",src:e.avatar,alt:e.name}),e.selected&&e.name)}function g(e){var t=e.interviewers.map(function(t){return r.a.createElement(_,{key:t.id,name:t.name,avatar:t.avatar,selected:t.id===e.value,setInterviewer:function(n){e.onChange(t.id)}})});return r.a.createElement("section",{className:"interviewers"},r.a.createElement("h4",{className:"interviewers__header text--light"},"Interviewer"),r.a.createElement("ul",{className:"interviewers__list"}," ",t," "))}function w(e){var t=r.a.useState(e.name||""),n=Object(v.a)(t,2),a=n[0],i=n[1],s=r.a.useState(e.interviewers||null),c=Object(v.a)(s,2),m=c[0],o=c[1],l=r.a.useState(""),u=Object(v.a)(l,2),d=u[0],p=u[1];return r.a.createElement("main",{className:"appointment__card appointment__card--create"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("form",{autoComplete:"off",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{className:"appointment__create-input text--semi-bold",name:"name",type:"text",placeholder:"Enter Student Name","data-testid":"student-name-input",onChange:function(e){return i(e.target.value)}}),r.a.createElement("section",{className:"appointment__validation"},d)),r.a.createElement(g,{interviewers:e.interviewers,value:m,onChange:o})),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(f,{danger:!0,onClick:function(){i(""),o(null),e.onCancel()}},"Cancel"),r.a.createElement(f,{confirm:!0,onClick:function(){""!==a?e.onSave(a,m):p("Student name cannot be blank")}},"Save"))))}function N(e){return r.a.createElement("main",{className:"appointment__card appointment__card--status"},r.a.createElement("img",{className:"appointment__status-image",src:"images/status.png",alt:"Loading"}),r.a.createElement("h1",{className:"text--semi-bold"},e.message))}function h(e){return r.a.createElement("main",{className:"appointment__card appointment__card--confirm"},r.a.createElement("h1",{className:"text--semi-bold"},e.message),r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(f,{onClick:e.onCancel,danger:!0},"Cancel"),r.a.createElement(f,{onClick:e.onConfirm,danger:!0},"Confirm")))}function b(e){return r.a.createElement("main",{className:"appointment__card appointment__card--error"},r.a.createElement("section",{className:"appointment__error-message"},r.a.createElement("h1",{className:"text--semi-bold"},"Error"),r.a.createElement("h3",{className:"text--light"},e.message)),r.a.createElement("img",{className:"appointment__error-close",src:"images/close.png",alt:"Close",onClick:e.onClose}))}function y(e){var t=e.id,n=e.interviewersForDay,a=e.cancelInterview,i="EMPTY",s="SHOW",c="SAVING",m="ERROR_SAVE",o="ERROR_DELETE",l="DELETING";var f=function(e){var t=r.a.useState(e),n=Object(v.a)(t,2),a=n[0],i=n[1],s=r.a.useState([e]),c=Object(v.a)(s,2),m=c[0],o=c[1];return{mode:a,transition:function(e){o([].concat(Object(E.a)(m),[e])),i(e)},back:function(){m[m.length-1]===e||(o(m.slice(0,m.length-1)),i(m[m.length-2]))}}}(e.interview?s:i),_=f.mode,g=f.transition,y=f.back,C=e.interview&&e.interview.interviewer||[];function k(n,a){var r={student:n,interviewer:a};"number"==typeof a?(g(c),e.bookInterview(t,r).then(function(){g(s)}).catch(function(){g(m,!0)})):g(m,!0)}return r.a.createElement("article",{className:"appointment"},r.a.createElement(u,{time:e.time}),_===i&&r.a.createElement(d,{onAdd:function(){g("CREATE")}}),"CREATE"===_&&r.a.createElement(w,{onSave:k,value:e.id,interviewers:e.interviewers,onCancel:function(){y()},name:C.student}),_===s&&r.a.createElement(p,{student:e.interview.student,interviewers:C,onDelete:function(){g("CONFIRM")},onEdit:function(){g("CREATE")}}),_===c&&r.a.createElement(N,{message:c}),_===l&&r.a.createElement(N,{message:l}),"CONFIRM"===_&&r.a.createElement(h,{onConfirm:function(){g(l),a(t).then(function(){g(i)}).catch(function(){g(o,!0)}),window.location.reload(!1)},onCancel:function(){y()},message:"CONFIRM"}),"EDIT"===_&&r.a.createElement(w,{interviewers:n,onCancel:function(){return y()},onSave:k,name:C.student,interviewer:C.id}),_===m&&r.a.createElement(b,{message:"ERROR SAVING",onClose:function(){return y()}}),_===o&&r.a.createElement(b,{message:"ERROR DELETING",onClose:function(){g(s)}}))}var C=n(5),k=n(3),I=n(29).default;s.a.render(r.a.createElement(function(e){var t=function(){var e=r.a.useState({day:"Monday",days:[],appointments:{},interviewers:{},spots:4}),t=Object(v.a)(e,2),n=t[0],a=t[1],i="Monday";for(var s in n.days)n.day===n.days[s].name&&(i=s);return r.a.useEffect(function(){Promise.all([Promise.resolve(I.get("/api/days")),Promise.resolve(I.get("/api/appointments")),Promise.resolve(I.get("/api/interviewers"))]).then(function(e){a(function(t){return{days:e[0].data,appointments:e[1].data,interviewers:e[2].data}})})},[]),{state:n,setDay:function(e){return a(Object(k.a)({},n,{day:e}))},bookInterview:function(e,t){var r=Object(k.a)({},n.appointments[e],{interview:Object(k.a)({},t)}),s=Object(k.a)({},n.appointments,Object(C.a)({},e,r));return I.put("/api/appointments/".concat(e),r).then(function(){n.days[i].spots-=1,a(Object(k.a)({},n,{appointments:s}))})},cancelInterview:function(e){var t=Object(k.a)({},n.appointments[e],{interview:null});return I.delete("/api/appointments/".concat(e),t).then(function(){n.days[i].spots+=1})}}}(),n=t.state,a=t.setDay,i=t.bookInterview,s=t.cancelInterview,c=function(e,t){var n=[],a=e.days.filter(function(e){return e.name===t});return a.length>0&&a[0].appointments.length>0&&(n=a[0].appointments.map(function(t){return e.appointments[t]})),n}(n,n.day),m=function(e,t){var n=[],a=e.days.filter(function(e){return e.name===t});return a.length>0&&a[0].interviewers.length>0&&(n=a[0].interviewers.map(function(t){return e.interviewers[t]})),n}(n,n.day),o=c.map(function(e){return r.a.createElement(y,{key:e.id,id:e.id,time:e.time,interview:e.interview,interviewersForDay:e.interview,interviewers:m,bookInterview:i,cancelInterview:s})});return r.a.createElement("main",{className:"layout"},r.a.createElement("section",{className:"sidebar"},r.a.createElement("img",{className:"sidebar--centered",src:"images/logo.png",alt:"Interview Scheduler"}),r.a.createElement("hr",{className:"sidebar__separator sidebar--centered"}),r.a.createElement("nav",{className:"sidebar__menu"},r.a.createElement(l,{days:n.days,day:n.day,setDay:a})),r.a.createElement("img",{className:"sidebar__lhl sidebar--centered",src:"images/lhl.png",alt:"Lighthouse Labs"})),r.a.createElement("section",{className:"schedule"},o))},null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.5d5e3e45.chunk.js.map